# ExchangeRateMonitor

Этот проект представляет собой скрипт мониторинга курсов валют Национального банка Республики Беларусь (НБ РБ) через API. Цель – выяснить время обновления курсов на сайте НБ РБ и использовать эти данные в Telegram-боте для отправки уведомлений пользователям.

## Описание проекта

Скрипт **ExchangeRateMonitor** автоматически получает курсы валют (USD, EUR, RUB, CNY) и фиксирует время их изменения. Мониторинг проводится с 9:00 до 16:00 с интервалом 5–10 минут.

## Функциональность

- Получение актуальных курсов валют через API НБ РБ.
- Сохранение первой полученной информации в файл.
- Проверка курсов каждые 10 минут в установленное время.
- Запись изменений курсов с отметкой времени в лог-файл.

## Используемые файлы

- **exchange_rate_monitor.py** – основной скрипт мониторинга курсов.
- **test_exchange_rate_monitor.py** – тесты для проверки работы скрипта.
- **exchange_rates.json** – файл с последними сохранёнными курсами.
- **exchange_rate_changes.log** – лог-файл с зафиксированными изменениями курсов.

## Описание функций

### fetch_exchange_rates()

Запрашивает курсы валют с API НБ РБ и возвращает словарь с актуальными значениями для USD, EUR, RUB и CNY.

### load_previous_rates()

Загружает последний сохранённый набор курсов из файла **exchange_rates.json**.

### save_rates(rates)

Сохраняет переданный словарь курсов в файл **exchange_rates.json**.

### log_change(currency, old_rate, new_rate)

Записывает изменение курса в **exchange_rate_changes.log**, фиксируя старый и новый курс с отметкой времени.

### monitor_exchange_rates()

Основная функция скрипта:

1. Загружает последний сохранённый курс или получает новые данные, если файла нет.
2. Запускает цикл мониторинга с 9:00 до 16:00.
3. Проверяет изменения каждые 10 минут.
4. В случае изменений фиксирует их в лог-файле.

## Запуск проекта

1. Запустите скрипт:
   ```sh
   python exchange_rate_monitor.py
   ```
2. Для тестирования выполните:
   ```sh
   python -m unittest test_exchange_rate_monitor.py
   ```
